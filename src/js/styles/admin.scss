/**
 * Admin styles for Virtual Media Folders AI Organizer.
 *
 * @package VmfaAiOrganizer
 */

/* Tab navigation */
.vmfa-nav-tabs {
	margin-bottom: 20px;
}

.vmfa-tab-content {
	margin-top: 20px;
}

/* Provider-specific field visibility */
.vmfa-provider-row {
	display: none;

	&.vmfa-provider-active {
		display: table-row;
	}

	/* Azure-specific fields: only show when both OpenAI is selected AND Azure type is chosen */
	&.vmfa-azure-row {
		display: none;

		&.vmfa-provider-active.vmfa-azure-active {
			display: table-row;
		}
	}
}

.vmfa-ai-organizer-panel {
	.components-card {
		margin-bottom: 20px;
		max-width: 800px;
	}
}

/* Statistics Card */
.vmfa-stats-card {
	max-width: 100% !important;

	.vmfa-stats-grid {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 16px;
	}

	.vmfa-stat {
		text-align: center;
		padding: 12px;
		background: #f0f0f1;
		border-radius: 4px;
	}

	.vmfa-stat-value {
		display: block;
		font-size: 24px;
		font-weight: 600;
		color: #1e1e1e;
	}

	.vmfa-stat-label {
		display: block;
		font-size: 12px;
		color: #757575;
		margin-top: 4px;
	}
}

/* Scan Controls */
.vmfa-scan-controls {
	max-width: 100% !important;

	.components-radio-control {
		margin-bottom: 16px;
	}

	.components-notice {
		margin: 16px 0;
	}

	.vmfa-scan-actions {
		display: flex;
		gap: 12px;
		margin-top: 20px;
		padding-top: 20px;
		border-top: 1px solid #e0e0e0;
	}
}

/* Progress Display */
.vmfa-scan-progress {
	.components-card__header {
		h3 {
			display: flex;
			align-items: center;
			gap: 8px;
			margin: 0;
		}
	}

	.vmfa-badge {
		font-size: 11px;
		padding: 2px 8px;
		border-radius: 3px;
		font-weight: 500;

		&.vmfa-badge-info {
			background: #e5f3ff;
			color: #0073aa;
		}
	}

	.vmfa-progress-info {
		margin-bottom: 20px;
	}

	.vmfa-progress-row {
		display: flex;
		justify-content: space-between;
		padding: 8px 0;
		border-bottom: 1px solid #f0f0f1;

		&:last-child {
			border-bottom: none;
		}
	}

	.vmfa-progress-label {
		color: #757575;
	}

	.vmfa-progress-value {
		font-weight: 500;

		&.vmfa-success {
			color: #00a32a;
		}

		&.vmfa-error {
			color: #d63638;
		}
	}

	.vmfa-progress-bar-container {
		height: 8px;
		background: #e0e0e0;
		border-radius: 4px;
		margin: 16px 0;
		overflow: hidden;

		&.vmfa-progress-indeterminate {
			.vmfa-progress-bar {
				width: 30% !important;
				animation: vmfa-indeterminate 1.5s infinite ease-in-out;
			}
		}
	}

	.vmfa-progress-bar {
		height: 100%;
		background: #2271b1;
		border-radius: 4px;
		transition: width 0.3s ease;
	}

	.vmfa-progress-hint {
		font-size: 12px;
		color: #757575;
		font-style: italic;
		margin-top: -8px;
		margin-bottom: 16px;
	}

	.vmfa-progress-error {
		color: #d63638;
		background: #fcf0f1;
		padding: 12px;
		border-radius: 4px;
		margin-top: 12px;
	}

	.vmfa-progress-actions {
		display: flex;
		gap: 12px;
		margin-top: 20px;
	}

	.vmfa-recent-results {
		margin-top: 20px;
		padding-top: 20px;
		border-top: 1px solid #e0e0e0;
		max-height: 400px;
		overflow-y: auto;

		h4 {
			margin: 0 0 12px 0;
			position: sticky;
			top: 0;
			background: #fff;
			padding-bottom: 8px;
		}
	}

	.vmfa-results-list {
		list-style: none;
		margin: 0;
		padding: 0;
	}

	.vmfa-result-item {
		background: #f9f9f9;
		border-radius: 4px;
		margin-bottom: 4px;
		font-size: 13px;
		border: 1px solid #e0e0e0;

		&.vmfa-result-skip {
			opacity: 0.7;

			.vmfa-result-header {
				background: #f5f5f5;
			}
		}

		&.vmfa-result-create {
			.vmfa-result-header {
				background: #f0f7f0;
			}
		}

		&.vmfa-result-assign {
			.vmfa-result-header {
				background: #f0f5ff;
			}
		}

		&.is-expanded {
			border-color: #007cba;

			.vmfa-result-header {
				border-bottom: 1px solid #e0e0e0;
			}
		}
	}

	.vmfa-result-header {
		display: flex;
		align-items: center;
		gap: 8px;
		padding: 10px 12px;
		width: 100%;
		border: none;
		background: transparent;
		cursor: pointer;
		text-align: left;
		font-size: 13px;

		&:hover {
			background: #f0f0f0;
		}

		&:focus {
			outline: 2px solid #007cba;
			outline-offset: -2px;
		}
	}

	.vmfa-result-action {
		font-size: 16px;
		flex-shrink: 0;
	}

	.vmfa-result-filename {
		font-weight: 500;
		flex: 1;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		min-width: 0;
	}

	.vmfa-result-folder {
		color: #1e4620;
		font-size: 12px;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		max-width: 150px;
	}

	.vmfa-result-confidence {
		font-size: 11px;
		padding: 2px 6px;
		background: #e5f3ff;
		border-radius: 3px;
		flex-shrink: 0;
	}

	.vmfa-result-toggle {
		font-size: 10px;
		color: #757575;
		flex-shrink: 0;
	}

	.vmfa-result-details {
		padding: 12px 16px;
		background: #fff;
		border-radius: 0 0 4px 4px;

		dl {
			display: grid;
			grid-template-columns: auto 1fr;
			gap: 6px 12px;
			margin: 0;
		}

		dt {
			font-weight: 500;
			color: #757575;
			font-size: 12px;
		}

		dd {
			margin: 0;
			font-size: 13px;
			word-break: break-word;
		}

		.vmfa-result-reason-text {
			white-space: pre-wrap;
		}
	}
}

/* Preview Modal */
.vmfa-preview-modal {
	.components-modal__content {
		padding: 0;
		display: flex;
		flex-direction: column;
		max-height: 80vh;
	}

	.vmfa-preview-content {
		padding: 20px;
		overflow-y: auto;
		flex: 1 1 auto;
	}

	.vmfa-preview-actions {
		display: flex;
		justify-content: flex-start;
		gap: 12px;
		padding: 16px 20px;
		border-top: 1px solid #e0e0e0;
		background: #fff;
		flex-shrink: 0;
	}

	.vmfa-preview-summary {
		margin-bottom: 24px;

		h3 {
			margin: 0 0 12px 0;
		}
	}

	.vmfa-preview-stats {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 12px;
	}

	.vmfa-preview-stat {
		text-align: center;
		padding: 16px;
		background: #f0f0f1;
		border-radius: 4px;

		.vmfa-stat-value {
			display: block;
			font-size: 28px;
			font-weight: 600;
			color: #1e1e1e;
		}

		.vmfa-stat-label {
			display: block;
			font-size: 12px;
			color: #757575;
			margin-top: 4px;
		}
	}

	.vmfa-preview-section {
		margin-top: 24px;
		padding-top: 24px;
		border-top: 1px solid #e0e0e0;

		h4 {
			margin: 0 0 12px 0;
		}
	}

	.vmfa-folder-list {
		list-style: none;
		margin: 0;
		padding: 0;
	}

	.vmfa-folder-item {
		display: flex;
		align-items: center;
		gap: 8px;
		padding: 8px 12px;
		background: #f9f9f9;
		border-radius: 4px;
		margin-bottom: 4px;
	}

	.vmfa-preview-table-wrapper {
		overflow-x: auto;
	}

	.vmfa-preview-table {
		width: 100%;
		border-collapse: collapse;

		th,
		td {
			padding: 8px 12px;
			text-align: left;
			border-bottom: 1px solid #e0e0e0;
		}

		th {
			background: #f0f0f1;
			font-weight: 600;
		}
	}

	.vmfa-confidence-high {
		color: #00a32a;
	}

	.vmfa-confidence-medium {
		color: #dba617;
	}

	.vmfa-confidence-low {
		color: #d63638;
	}

	.vmfa-preview-more {
		color: #757575;
		font-style: italic;
		margin-top: 8px;
	}

	.vmfa-preview-skipped {
		.description {
			color: #757575;
			margin-bottom: 12px;
		}
	}

	.vmfa-skipped-list {
		margin: 0;
		padding-left: 20px;

		li {
			margin-bottom: 4px;
			color: #757575;
		}
	}

	.vmfa-preview-actions {
		display: flex;
		justify-content: flex-start;
		gap: 12px;
		padding: 16px 20px;
		border-top: 1px solid #e0e0e0;
		background: #f9f9f9;
	}
}

/* Restore Panel */
.vmfa-restore-panel {
	.vmfa-backup-info {
		margin-bottom: 16px;
	}

	.vmfa-backup-details {
		background: #f9f9f9;
		padding: 12px;
		border-radius: 4px;
	}

	.vmfa-backup-row {
		display: flex;
		justify-content: space-between;
		padding: 4px 0;
	}

	.vmfa-backup-label {
		color: #757575;
	}

	.vmfa-backup-value {
		font-weight: 500;
	}

	.vmfa-restore-confirm {
		background: #fcf0f1;
		padding: 16px;
		border-radius: 4px;
		margin-top: 16px;
	}

	.vmfa-restore-warning {
		margin: 0 0 12px 0;
		color: #d63638;
	}

	.vmfa-restore-actions {
		display: flex;
		gap: 12px;
	}
}

/* Locked badge for settings */
.vmfa-locked-badge {
	display: inline-block;
	margin-left: 8px;
	padding: 2px 8px;
	background: #f0f0f1;
	border-radius: 3px;
	font-size: 11px;
	color: #757575;
}

/* Provider-specific field visibility */
.vmfa-provider-field {
	&[data-provider] {
		transition: opacity 0.2s ease;
	}
}

/* Responsive adjustments */
@media (max-width: 782px) {
	.vmfa-stats-card .vmfa-stats-grid {
		grid-template-columns: repeat(2, 1fr);
	}

	.vmfa-preview-modal .vmfa-preview-stats {
		grid-template-columns: 1fr;
	}
}

/* Indeterminate progress bar animation */
@keyframes vmfa-indeterminate {
	0% {
		transform: translateX(-100%);
	}

	100% {
		transform: translateX(400%);
	}
}